{% load static %}

<!DOCTYPE html>
<html>
<head>
	<title>Registration</title>


	<style>
		@font-face {
        font-family: "Roboto";
        src: url("{% static 'fonts/Roboto/Roboto-Thin.ttf' %}") format("truetype");
    }
		body {
			font-family: 'Roboto';
			background-color: #aedef5;
		}
		.registration-box {
			width: 500px;
			background-color: white;
			border: 1px solid #d4d4d4;
			border-radius: 0px;
			margin: 100px auto;
			padding: 20px;
			text-align: center;

			/* opacity: 80%; */
		}
		.registration-box h1 {
			font-size: 32px;
			margin-bottom: 20px;
		}
		.registration-box P {
			font-size: 20px;

			margin-bottom: 20px;
			color: rgb(241, 9, 9);
		}
		.registration-box input[type="text"], .registration-box input[type="email"], .registration-box input[type="password"] {
			width: 50%;
			padding: 6px;
			border: none;
			border-radius: 0px;
			margin-bottom: 20px;
			margin-left: 0px;
			font-size: 14px;
			background: #f1f1f1;
		}
		.registration-box input[type="submit"] {
			background-color: #026492;
			color: white;
			border: 0;
			padding: 12px 20px;
			font-size: 16px;
			border-radius: 5px;
			cursor: pointer;
			letter-spacing: 2px;
			font: 'Roboto';


		}
		.registration-box button[type="button"] {
			width: 20%;
			background-color: #026492;
			color: rgb(255, 255, 255);
			border: none;
			padding: 7px 20px;
			font-size: 12px;
			border-radius: 5px;
			cursor: pointer;
			font: Roboto;
			letter-spacing: 2px;
		}
		/* .registration-box button[type="button"]:hover {
			width: 30%;
			background-color: #2ea3da;
			color: rgb(255, 255, 255);
			border: 1px solid black;
			padding: 7px 20px;
			font-size: 12px;
			border-radius: 5px;
			cursor: pointer;
			font: Roboto;
			letter-spacing: 2px;
		} */

		/* .registration-box label{
			color: rgb(156, 20, 20);
			border: 1px solid black;
			border-radius: 5px;
			display: inline-block;
			

		} */
		.preview-container {
        display: flex;
        /* justify-content: space-between; */
		}
		.preview-container img {
			/* width: 50px;
			height: 50px; */
			margin-left: auto;
  			margin-right: auto;
  			width: 50%;
		
			

		}

		.input-ss {
			
			
			/* width: 90%;
			height: 100px;
			border: 1px solid #d4d4d4;
			margin-left: 17px;
			padding: 6px;
			margin-bottom: 20px; */
		}
		.section {
			width: 90%;
			height: 100px;
			border: 1px solid #d4d4d4;
			margin-left: 17px;
			padding: 6px;
			margin-bottom: 20px;
			/* background-color: rgb(220, 221, 223); */

		}
		/* .section:hover {
			width: 90%;
			height: 100px;
			border: 2px solid #000000;
			margin-left: 17px;
			padding: 6px;
			margin-bottom: 20px;
			background-color: rgb(220, 221, 223);

		} */
		.section label {
			vertical-align: top;			
			font-size: small;
			float: left;
		}
		.typewriter {
        font-family: monospace;
        white-space: nowrap;
        overflow: hidden;
        letter-spacing: 2px;
		color: black;
		font-size: small;
    }

	.custom-input {
        width: 50%;
        height: 10px;
        font-size: 16px;
        /* border-radius: 10px; */
        /* border: 5px solid black; */
		font-family: monospace;
        white-space: nowrap;
		letter-spacing: 0px;
		margin-left: auto;
		display: inline-block;
		

    }
	.custom-input label {
		font-size: 10px;
		display: inline-block;


	}
	.basic {
		display: none;
		white-space: nowrap;
		text-align: left;
		margin-left: 17px;
		
		
	}
	.basic input[type="text"], .basic input[type="email"], .basic input[type="password"] {
			width: 95%;


		
			font-size: 14px;
			background: #d3d3d3;
			display: flow-root;
			margin-bottom: 0px;
			border-radius: 5px;
			/* border: 1px solid black; */
		}
	.basic label{
		font-size: 14px;
		display: inline-block;
		font-weight: 1000;
		margin-left: 0px;
	}
	table {
  border-collapse: collapse;
  border-spacing: 0px;
  width: 95%;
  border: none;
  padding: 20px;
  background-color: #f1f1f1;
}

th, td {
  text-align: left;
  padding: 5px;
  font-family: monospace;
white-space: nowrap;
	letter-spacing: 0px;
}

tr:nth-child(even) {
  background-color: #f1f1f1;
}
	</style>
	
</head>



<body>
	<div class="registration-box">
		<h1>Registration</h1>
		<form action="{% url 'create_profile' %}" enctype="multipart/form-data" onsubmit="return validateForm()" method="post">
            {% csrf_token %}
			<div class="input-ss">
				<div class="basic" style="display: flow-root;">
					<span style="white-space: nowrap;">
						<label for="EmployeeID">EmployeeID:</label>
						<input type="text" name="employeeId" id="employeeId" placeholder="Employee ID" value="20211228037" required>
					</span>
					
				</div>
				<button type="button" id="submitBtn">Check</button><br><br>

				
				<div class="basic" id="details" name="details">
					<!-- <label for="EmployeeID">EmployeeID</label>
					<input class="custom-input" type="text" id="EmployeeID" disabled> -->
					<span style="white-space: nowrap;">
						<label for="EmployeeName">Employee Name : </label>
						<input type="text" id="EmployeeName" disabled>
					</span>
					<br>
					<span style="white-space: nowrap;">
						<label for="EmployeeName">Designation : </label>

						<input type="text" id="EmpDesignation" disabled>
	
					</span>
					<br>
					<span style="white-space: nowrap;">

						<label for="EmployeeName">Functional Designation : </label>
						<input type="text" id="EmpFunctionalDesignation" disabled>
					</span>
					<br>
					<span style="white-space: nowrap;">
						<label for="EmployeeName">Place of Posting : </label>

						<input type="text" id="POP" disabled>
					</span>
					<br>
	
					<!-- <table>
						<tr>
							<td id="EmployeeID">User Found</td>
						</tr>
						<tr>
							<td id="EmployeeName"></td>
						</tr>
	<tr>
		<td id="EmpDesignation"></td>
	</tr>				
	<tr>
		<td id="EmpFunctionalDesignation"></td>
	</tr>
	<tr>
		<td id="POP"></td>
	</tr>
							
						
						 
					</table> -->
				</div>
			</div>
			
			
		

			<input type="email" id="email" name="email" placeholder="Domain" required>
			<input type="password" id="password" name="password" placeholder="Password" required>
			<!-- <input type="password" id="confirm_password" name="confirm_password" placeholder="Re-type Password" required> -->
            <br>
          
			<div class="section">
				<div class="preview-container">
					
					<div>
						<label for="signature"><strong>Upload Signature</strong></label><br><br>	
						<input type="file" id="signature" name="signature" accept="image/*" onchange="previewImage(this, 'preview1')">
					</div>
					<div>
						<img id="preview1" style="display: none;" src="#" alt="Image Preview"/>
					</div>
				</div>
			</div>

			<div class="section">

			
				<div class="preview-container">
					<div>
						<label for="pi"><strong>Upload PI</strong></label><br><br>			
						<input type="file" id="pi" name="pi" accept="image/*" onchange="previewImage(this, 'preview2')"><br>
					</div>
					<div>
						<img id="preview2" style="display: none;" src="#" alt="Image Preview"/><br>
					</div>
				</div>
			</div>
		
		
			  <!-- </div> -->
            
            <!-- <input type="submit" value="Upload"> -->
           
			<input type="submit" value="Sign up">
		</form>

		<div id="gg" >
			<p id="emplyname"></p>
		</div>
		{% if messages %}
				
			{% for message in messages %}
					<p{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</p>
			{% endfor %}
				
		{% endif %}
       
          
	</div>
	

	
</body>


<script>
	function previewImage(input, previewId) {
	  if (input.files && input.files[0]) {
		var reader = new FileReader();

		reader.onload = function(e) {
		  document.getElementById(previewId).src = e.target.result;
		  document.getElementById(previewId).style.display = 'block';

		}

		reader.readAsDataURL(input.files[0]);
	  }
	}
  </script>

<script>
	function validateForm() {
	  // Get the values of the password and confirm password fields
	  var password = document.getElementById("password").value;
	  var confirm_password = document.getElementById("confirm_password").value;
	
	  // Check if the password and confirm password fields match
	  if (password != confirm_password) {
		alert("Error: Passwords do not match");
		return false;
	  }
	
	  return true;
	}
	</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
    $("#submitBtn").click(function() {
      var param = $("#employeeId").val();
	  var data = { 'employeeId': param };
      $.ajax({
		url: "{% url 'fetch' %}",
        type: "POST",
		
		data: {
			"employeeId": param ,
		},
		dataType: 'json',
        success: function(data) {
          console.log(data);
	// 	  var button = document.getElementById("submitBtn");
	// 	  button.onclick = function() {
	// 		var div = document.getElementById("details");
    //     		div.style.display = "block";
    // };
		  
		//   var input = document.getElementById("EmployeeID");
    	// 	input.innerText = JSON.stringify(data['data']['EmployeeID']);
		  var input = document.getElementById("EmployeeName");
    		input.value = JSON.stringify(data['data']['EmployeeName']);
		  var input = document.getElementById("EmpDesignation");
    		input.value = JSON.stringify(data['data']['EmpDesignation']);
		  var input = document.getElementById("EmpFunctionalDesignation");
    		input.value = JSON.stringify(data['data']['EmpFunctionalDesignation']);
		  var input = document.getElementById("POP");
    		input.value = JSON.stringify(data['data']['POP']);

			var div = document.getElementById("details");
        		div.style.display = "block";
		  
		  
		//   var exampleParagraph = document.getElementById("details");
    	// 	exampleParagraph.innerHTML = JSON.stringify(data['data']['EmployeeID']);
    	// 	exampleParagraph.innerHTML = JSON.stringify(data['data']['POP']);

          // Do something with the data, such as displaying it on the page
        },
		error: function(xhr, error){
			alert(error.message);
		}
      });
    });
  });
</script>
</html>
